{% extends "base.html" %}
{% set currentPage = "Courses" %}
{% block body %}

<link rel="stylesheet" href="/static/css/sidebar.css" type="text/css" />
<link rel="stylesheet" href="/static/css/Courses.css" type="text/css" />
<body>
    <div id="wrapper">
        {%include "sidebar.html" %}
        <!-- Psage Content -->
        <div id="page-content-wrapper">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-success alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                            {{message}}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            <h2>{{currentProgram.name}}: {{curTermName.name}}</h2>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Course Name</th>
                                    <th>Taught By</th>
                                    <th>Schedule</th>
                                    <th>Capacity</th>
                                    <th>Notes</th>
                                    <th>Last Edited By</th>
                                </tr> 
                            </thead>
                            <tbody>
                                {% for course in courses %}
                                    <tr>
                                        <!--COURSE NAME-->
                                        <td>{{course.prefix.prefix}} {{course.bannerRef.number}}
                                            {% if course.specialTopicName is not none %}
                                                {{course.specialTopicName}}
                                            {% else %}
                                                {{course.bannerRef.ctitle}}
                                            {%endif%}
                                        </td>
                                        <!--TAUGHT BY-->
                                        <td>
                                            {% for instructor in instructors[course.cId] %}
                                                {{instructor.username.username}}
                                            {% endfor %}
                                        </td>
                                        <!--SCHEDULE-->
                                        <td>
                                            {% if course.schedule != None %}
                                                {{course.schedule.days}}{{course.schedule.startTime.strftime('%H:%M')}} - {{course.schedule.endTime.strftime('%H:%M')}}
                                            {% endif %}
                                        </td>
                                        <!--CAPACITY-->
                                        <td> 
                                            {% if course.capacity == None  %}
                                            {% else %}
                                                {{course.capacity}}
                                            {% endif %}
                                        </td>
                                        <!--NOTES-->
                                        <td>
                                            <a href='javascript:;'  data-toggle='popover' title='Course Notes' data-content='{{course.notes}}'>Notes</a>
                                        </td>
                                        <!--LAST EDITED BY-->
                                        <td>
                                            {{course.lastEditBy}}
                                        </td>
                                        <td>
                                            {% if isAdmin or isDivisionChair or isProgramChair %}
                                                <!--EDIT MODAL-->
                                                <a href="/editCourseModal/{{currentTerm}}/{{course.prefix.prefix}}/{{course.cId}}"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a>
                                                <!--DELETE MODAL-->
                                                <a href=# data-toggle="modal" data-target="#deleteModal{{course.cId}}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
                                                {% include "deleteCourse.html" %}
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                <form method="post" id="addCourseForm">
                                    {% include "addCourseForm.html" %}
                                </form>
                            </tfoot>
                        </table>
                        <!--if you change the name of this button it will break the javascript in toggleMenu.js-->
                        <a href="#menu-toggle" class="btn btn-info" id="menu-toggle">Close Sidebar</a> 
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->
    <!-- Menu Toggle Script -->
    <script type="text/javascript" src="/static/js/local/toggleMenu.js"></script>
    <script type="text/javascript" src="/static/js/ext/chosen.jquery.min.js"></script>
</body>
{% endblock %}
