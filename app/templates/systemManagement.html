



{% extends "base.html" %} {% set currentPage = "systemManagement" %} {% block body %}
{% include "snips/messages.html" %}
<link rel="stylesheet" href="../static/css/systemManagement.css" >
<script type="text/javascript" src="/static/js/local/systemManagement.js"></script>

<div class="container">
<div class="panel panel-default">
  <!--TERM MANAGEMENT-->
  <div class="panel-heading">
    <h3 class="panel-title">Term Management</h3>
  </div>
  <table class="table" cellspacing="0" cellpadding="0">
      {% include "snips/termModal.html" %}
      {% for term in terms %}
      <tr>
        <td> 
        {% for state in term_state %}
            {% if state.number == 0 %}
            <td style="margin-top:1px !important; padding-top: 1px !important;">
              <button style="width: 100%;" type="button" class="btn btn-primary terms_btn" data-target="#order{{state.order + 1}} " aria-expanded="false" aria-controls="order{{state.order + 1}}" onclick=" showPanel({{term.termCode}},this);">{{term.name}} </button>
            </td>      
            {% else %}
              {% if state.number != 7 %}
              <td style="padding: 1px !important; margin: 1px !important;">
                <button style="width:100%"class="theButtons btn btn-light" type = "button" id = "btn{{state.order}}" data-toggle="collapse" data-target="#order{{state.order}}" aria-expanded="false" aria-controls="order{{state.order}}" onclick="showPanel({{term.termCode}},this)" > {{state.display_name}} <span class="glyphicon glyphicon-chevron-right"></span></button>
              </td>  
              {% endif %}
            {% endif %}
        {% endfor %}
      </td>
      </tr>
      <tr>
        <td colspan="9" id = "divForPanel{{term.termCode}}"> <!-- Calls the panels for each button in  term-->
        </td>
      </tr>
      {% endfor %}
  </table>
  </div>
<div id = "allPanels"><!--This covers all the panels-->
  <div class="panel panel-default"> 
  {% set format0 = [1,2,4] %}
  {% set format1 = [3,5] %}
  {% set format2 = [6] %}
  {% for state in term_state %}
    {% if state.number in format0 %}
      <div class = "row">
        <div id="order{{state.order}}" class="collapse"> 
          <div class="panel-body">
            <div class = "col-sm-10">
              <p><b>{{cfg['states'][state.number]['mainInfo']}}</b></p>
              <p><i>{{cfg['states'][state.number]['subtext']}}</i></p>
            </div>
            <div class = "col-sm-2">
              <button class="btn btn-sm btn-success" type="button" id="button{{state.number}}" data-toggle="collapse" data-target="#order{{state.order}},#order{{state.order + 1}}" aria-expanded="false" 
            aria-controls="order{{state.order + 1}}" onclick="enableTheOne('btn{{state.order + 1}}'); prevcolor('btn{{state.order}}'); change_text();">{{state.display_name}}<span class="glyphicon glyphicon-chevron-right"> </span></button>
            </div>
          </div>
        </div>
      </div>
    {% endif %}
    {% if state.number in format1 %}
          <div class="row">
          <div id="order{{state.order}}" class="collapse">
              <div class = "panel-body">
                <div class = "row text-center">
                    <p><b>{{cfg['states'][state.number]['mainInfo']}}</b><br> </p>
                </div>
                <div class ="row">
                  <div class = "col-sm-6">
                     <p><br><i>{{cfg['states'][state.number]['left_help_text']}}</i></p>
                     <!-- this is for the unlock button --->
                      <button class="btn btn-sm btn-success" type = "button" id = "button{{state.order-1}}" data-toggle="collapse" data-target="#order{{state.order - 1}}, #order{{state.order}}" aria-expanded="false" 
                      aria-controls="{{state.order-1}}" onclick="enableTheOne('btn{{state.order-1}}'); reverseFunc('btn{{state.order-1}}', 'btn{{state.order}}');"> <span class="glyphicon glyphicon-chevron-left"></span>{{cfg['states'][state.order - 1]['btn']}}</button>
                  </div>
                  <div class = "col-sm-6 text-right">
                      <p><br><i>{{cfg['states'][state.number]['right_help_text']}}</i></p>
                      <!--- this is for the lock button --->
                      <button class="btn btn-sm btn-success" type = "button" id = "button{{state.order + 1}}" data-toggle="collapse" data-target="#order{{state.order + 1}}, #order{{state.order}}"  aria-expanded="false" 
                      aria-controls="{{state.order + 1}}" onclick ="enableTheOne('btn{{state.order + 1}}'); prevcolor('btn{{state.order}}');" >
                        {{state.display_name}}
                        <span class="glyphicon glyphicon-chevron-right"></span>
                      </button>
                      <br>
                      <span>
                        <sub>
                          <br> 
                            {{cfg['states'][state.number]['subtext']}}
                        </sub>
                      </span>
                  </div>
                  <div class = "row text-center">
                    <a>{{cfg['states'][state.number]['download']}}</a>
                  </div>
                </div>
              </div>
            </div>
            </div>
      {% endif %}
      {% if state.number in format2 %}
      <!--FINISH-->
       <div class = "row">
       <div id="order{{state.order}}" class="collapse">
          <div class = "panel-body">
            <div class = "row text-center">
              <p><b>{{cfg['states'][state.number]['mainInfo']}}</b></p>
            </div>
            <div class="row">
              <div class = "col-sm-6 txt-left">
            <!--<div class= "row text-center">-->
              <!--Click below to go to Room resolutions page-->
                <p><sub>{{cfg['states'][state.number]['goto_text']}}</p></sub>
              
              <!-- Room resolutions link-->
                <a>{{cfg['states'][state.number]['goto_link']}}</a>
              </div>
            <div class = "col-sm-6 text-right"> 
              <!-- Click to finish term-->
                  <p><i>{{cfg['states'][state.number]['right_help_text']}}</i><br></p>
                  <button type="button" id ="button{{state.order}}" class="btn btn-success" data-toggle="collapse" data-target= "#order{{state.order + 1}}" aria-controls="order{{state.order + 1}}" 
                    onclick="enableTheOne('btn{{state.order}}'); prevcolor('btn{{state.order}}');"> {{state.display_name}}
                  </button>
                  <p>
                    <sub><br>{{cfg['states'][state.number]['text']}}</sub>
                  </p>
              </div>
              <div class= "row">
               <button type = "button" id = "button{{state.order}}" class= "btn btn-success" data-toggle = "collapse" data-target="#order{{state.order}}"aria-controls="order{{state.order}}"
               onclick ="enableTheOne('btn{{state.order}}')">
              </button>
              </div>
          </div>
        </div>
        </div>
      </div>  
        {% endif %}
  {% endfor %}
      <!--After FINISH-->
      <div class = "row">
       <div id="archive" class="collapse" >
          <div class = "panel-footer">
            <div class = "row text-center">
              <p><b>The term is complete</b></p><br>
              <p>Couse and Room Preferences are no longer accepted, and rooms have been assigned.</p>
            </div>
          <div class = "row">
              <div class = "col-sm-4" >
                <br> 
                <a>Download Courses</a>
              </div>      
              <div class = "col-sm-4">  
                <br>
                <a>Download Rooms </a>
              </div>
            <div class = "col-sm-4 text-right"> 
                <input type = "button" class = "btn btn-danger" id = "Archive"  data-target ="#myModal" data-toggle="modal" aria-expanded="false" value = "Archive" onclick="change_btn_name1()"></input><br>
                <br><p><sub>(Archiving will hide the term from view in other CAS interfaces.)</sub></p>
            </div>
          </div>
          </div>
         </div>
         </div>
         <!--This is the modal for onclick on archive button confrirmation-->
         <div id="myModal" class="modal fade" tabindex = "-1" role="dialog">
            <div class="modal-dialog">
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Archive term</h4>
                </div>
                <div class="modal-body">
                  <p>Are you sure you are ready to archive the term?</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal" onclick="change_btn_name()">Yes</button>
                </div>
              </div>
          
            </div>
          </div>
  </div>
</div>
<!-- Modal -->
          
<!------------------------------------------------------------------------------------------------------------------------------------------>
<!--<div class = container>-->
<!--  <br>-->
<!--  <br>-->
<!--  <br>-->
<!--  <br>-->
<!--</div>  -->

<!--    <label for="newTerm">Create a new term</label>-->
<!--    <form action="\newTerm" method="post" id="newTerm" class="form-inline">-->
<!--      <div class="form-group">-->
<!--        <select class="form-control" name="keyValue">-->
<!--            {% for key in cfg['termInfo'] %}-->
<!--              <option value="{{key}}" required>-->
<!--                {{cfg['termInfo'][key]}}-->
<!--              </option>-->
<!--            {% endfor %}-->
<!--        </select>-->
<!--      </div>-->
<!--      <div class="form-group">-->
<!--        <select class="form-control" name="year">-->
<!--            {% for year in years %}-->
<!--              <option value="{{year}}" required>-->
<!--                {{year}}-->
<!--              </option>-->
<!--            {% endfor %}-->
<!--          </select>-->
<!--      </div>-->
<!--      <div class="form-group"-->
<!--        <input type="submit" class="btn btn-success" value="Save">-->
<!--      </div>-->
<!--    </form>-->
  
<!--------------------------------------------End----CREATE A NEW TERM---------------------------------------->
</div>
{% endblock %}