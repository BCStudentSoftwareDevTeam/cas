{# HTML for building management #}
{% extends "base.html" %}
{% set currentPage = "buildingManagement" %}
{% block body %}
{#<script type="text/javascript" src="/static/js/local/buildingManagement.js"></script>#}
<!--TODO: Add aria labels-->
<div>
    <h1 class="text-center">Building Management</h1>
</div>
<div class="container">
    <span class="border border-dark">
    <table class="table buildingMgmt table-hover text-center table-bordered">
        <thead class="thead-dark">

            <th scope="col" aria-labelledby="Room Header" ><h4 align="center"><strong>Room</strong></h4></th>
            <th scope="col" aria-labelledby="Type Header"> <h4 align="center"><strong>Type </strong></h4></th>
            <th scope="col" aria-labelledby="Edit Header"><h4 align="center"><strong>Edit</strong></h4></th>
            <th scope="col" aria-labelledby="Last Modified Header"><h4 align="center"><strong>Last Modified</strong></h4></th>
        </thead>
        <tbody>
            {%for room in rooms | sort(attribute="building.shortName")%}
            <tr scope = "row">
                <td id="room_{{room.number}}" width="20%" data-toggle="tooltip"><div class="rooms tooltip">{{room.building.name}} {{room.number}}<br /><span class="tooltiptext">{{room.building.shortName}} {{room.number}}</span></div></td>
                <td width="15%"> {{room.roomType}}</td>
                <td width="15%">
                    <button type="button"
                            class="btn btn-primary"
                            id="Edit{{room.rid}}"
                            data-target="#roomDetails"
                            aria-expanded="false"
                            aria-controls="roomDetails"
                            aria-labelledby="Edit Button"
                            onclick="setRoomInfo({{room.rID}}, this)">Edit
                    </button>
                </td>
                <td id="lastModified" width="20%">
                  {%  if room.lastModified is none  %}
                  00:00:00
                  {% else %}
                  {{room.lastModified}}
                  {% endif %}
                </td>

            </tr>
            <tr class="hidden_{{room.rID}}" style="height:0px";>
                <td colspan="4" id="hiddenRow_{{room.rID}}" style="padding:0px;">
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
 <div id = "roomDetails" class="collapse" aria-labelledby="Room Details" data-parent="#accordion">
    <div class="panel panel-default"> <!--panel for room information -->
        <div class="panel-body panel_color" style="margin:0; padding:0;">
            <div id="roomData">
                <table class="table table-dark">
                    <tr>
                        <td>
                           <div class="container">
                            <div id="selectedRoom">
                                <div class="row justify-content-md-center">
                                <div class="col-md-1"></div> <!--Empty div for spacing-->
                                <div class="col-md-4">
                                    <div aria-labelledby="Room Number">
                                        <strong>Room Number: </strong>
                                        <span id="roomNumber" ></span>
                                    </div><br>
                                    <div aria-labelledby="Room Capacity">
                                        <strong>Room Capacity: </strong>
                                        <input class="form-control" id="roomCapacity" type="number" min="0"></input>
                                    </div><br>
                                    <div aria-labelledby="Room Type">
                                        <strong>Room Type: </strong>
                                        <input class="form-control" id="roomType" type="text"></input>
                                    </div><br>
                                    <div aria-labelledby="Specialized Equpiment">
                                        <strong>Specialized Equipment: </strong>
                                        <textarea class="form-control" id="specializedEq" rows="3"></textarea>
                                    </div><br>
                                    <div aria-labelledby="Special Features">
                                        <strong>Special Features: </strong>
                                        <textarea class="form-control" id="specialFeatures" rows="3"></textarea>
                                    </div><br>
                                </div>
                                <div class="col-md-1"></div> <!--Empty div for spacing-->
                                {# Second column #}
                                <div class="col-md-5">
                                    <div class="row form-group" aria-labelledby="Movable Furniture">

                                        <label class="form-check-label" for="movableFurniture"><strong>Movable Furniture: </strong></label>
                                        <input id="movableFurniture" type="checkbox" class="form-check-input"></input>

                                    </div>
                                    {% include "snips/editableEducationTech.html" %}

                                    <div class="row form-group" id="educationTech" aria-labelledby="Education Tech">
                                        <label for="edTechButton"><strong>Education Tech: </strong></label>
                                        <button type="button"
                                                id="edTechButton"
                                                class="btn btn-info"
                                                data-toggle="modal"
                                                data-target="#edTechModal"
                                                onclick='seteducationTech()'>
                                            Open
                                        </button>
                                    </div>

                                    {# Three Accessibility dropdowns #}
                                    <label for="accessibility"><strong>Accessibility:</strong></label>
                                    <div id="accessibility" class="col-sm-12 accessibilities row form-group" aria-labelledby="Accessibility">
                                      <div class="col-sm-4">
                                        <label for="physicalAcc"><strong>Physical:</strong></label>
                                        <div class="tooltip">
                                            <span class="helpAcc glyphicon glyphicon-question-sign"></span>
                                            <span class="tooltiptext">
                                                A: Building and classroom exceeds minimal legal requirements (ramp, elevators, moveable furniture)
                                                <br /><hr>
                                                B: Building and classroom exceeds minimal legal requirements (classooms has fixed seating positions)
                                                <br /><hr>
                                                C: Building and classroom meets minimal legal requirements (building has an elevator and accessible doors)
                                            </span>
                                        </div>
                                        <select  id="physicalAcc" class="selectpicker" data-style="btn-info">
                                            <option disabled default value="0">Nothing selected</option>
                                            <option value="A">A</option>
                                            <option value="B">B</option>
                                            <option value="C">C</option>
                                        </select>
                                      </div>
                                      <div class="col-sm-4">
                                        <label for="visualAcc"><strong>
                                          Visual:
                                        </strong></label>

                                        <div class="tooltip">
                                            <span class="helpAcc glyphicon glyphicon-question-sign"></span>
                                            <span class="tooltiptext">
                                                A: Lighting controls (dimmers and blinds) and smartboard
                                                <br /><hr>
                                                B: Lightning control is present, no smartboard
                                                <br /><hr>
                                                C: Some lighting control (just blinds)
                                            </span>
                                        </div>

                                        <select id="visualAcc" class="selectpicker" data-style="btn-info">
                                            <option disabled default value="0">Nothing selected</option>
                                            <option value="A">A</option>
                                            <option value="B">B</option>
                                            <option value="C">C</option>
                                        </select>
                                      </div>



                                      <div class="col-sm-4">
                                        <label for="audioAcc"><strong>Audio:</strong></label>
                                        <div class="tooltip">
                                            <span class="helpAcc glyphicon glyphicon-question-sign"></span>
                                            <span class="tooltiptext">
                                              A: Speaker system present (for voice amplification)
                                              <br /><hr>
                                              B: Minimal ambient noise distraction
                                              <br /><hr>
                                              C: Moderate/persistent ambient noise distraction
                                            </span>
                                        </div>
                                        <select id="audioAcc" class="selectpicker" data-style="btn-info">
                                          <option disabled default value="0">Nothing selected</option>
                                            <option value="A">A</option>
                                            <option value="B">B</option>
                                            <option value="C">C</option>
                                        </select>
                                      </div>
                                    </div>

                                    {# Image Uploader #}
                                    <div id="imageUploaderDiv" class="row form-group" aria-labelledby="Image Preview and Upload">
                                      <label for="imageUploader"><strong>Images: </strong></label>
                                        {#<form id="uploader" action="/imageUpload" class="dropzone">
                                          <div class="col-sm-8 fallback">
                                            <input class="form-control"
                                                   type="file"
                                                   name="file"
                                                   accept="image/*">
                                          </div>
                                          <!-- <div class="col-sm-4"> -->
                                          <!-- <button class="btn btn-success" type="submit" >Submit Images</button> -->
                                          <!-- </div> -->
                                        </form>#}
                                        <div id="myId" class="dropzone"></div>
                                    </div>
                                  </div>
                                </div>
                                    <br />
                                    <br />
                                    <div class="row" id="submitChangesDiv">
                                        <div class="col-md-4"> </div>
                                        <div class="col-md-offset-4">
                                            <button type="button"
                                                    aria-labelledby="Submit Changes Button"
                                                    class="btn btn-success"
                                                    data-toggle="modal"
                                                    data-target="#makeChanges"
                                                    id="submitChanges">
                                                    Submit changes
                                            </button>
                                        </div>

                                    </div>
                                </div>




                            </div>

                            <!--pop-up for the onclick of submit changes button-->
                            <div class="modal fade" id="makeChanges" tabindex="-1" role="dialog" aria-labelledby="Are you sure?" aria-hidden="true">
                              <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <h5 class="modal-title">Are you sure?</h5>
                                  </div>
                                  <div class="modal-body">
                                     <p>Are you sure you want to update the information for this room?</p>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
                                    <button id "submitChanges" name ="adduser" value = "adduser" type="Submit" class="btn btn-success" onclick="saveChanges()" data-dismiss="modal"> Yes</button>
                                  </div>
                                </div>
                              </div>
                        </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
</div>
</div>

{% endblock %}
