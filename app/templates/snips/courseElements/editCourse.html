{% extends "base.html" %}
{% set currentPage = "editModal" %}
{% block body %}
{% with messages = get_flashed_messages(with_categories=true) %}
  {% for category, message in messages %}
    <div class="{{ category }}">{{ message }}</div>
  {% endfor %}
{% endwith %}
<div class="modal fade" id="editModal{{course.cId}}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
  <div class="modal-dialog modal-md">
    <form method="post" action="\editcourse\{{currentTerm}}\{{course.prefix.prefix}}\{{page}}">
      <div class="modal-content">
        <div class="modal-header">
          <a href="/courses/{{currentTerm}}/{{course.prefix.prefix}}">
            <button type="button" class="close" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </a>
          <h4 class="modal-title">Edit course</h4>
        </div>
        <div class="modal-body">
          {# Modal Title #}
          <h2 class="text-center">
            {{course.prefix.prefix}} {{course.bannerRef.number}}
          </h2>
          {# Pass in a hidden input to record the course ID #}
          <input type="hidden" name="cid" value="{{course.cId}}" >
          {# Pass in a hidden input to record the term #}
          <input type="hidden" id="term" value="{{currentTerm}}" >
          {# --Room Location-- #}
          <h5>Room Selection</h5>
          <select class="form-control" name="room">
            <option value="">---</option>
            {% for room in rooms %} <!---TODO: create conditional that atriggers flash if room ic occupied--->
              <option value="{{room.rID}}"
              {% if course.rid is not none %}
                {% if course.rid.rID == room.rID %}
                  selected 
                {% endif %}
              {% endif %}
              >
                {{ room.building.name }} : {{room.number}}
              </option>
            {% endfor %}
          </select>
          {# -- Section -- #}
          <h5>Section</h5>
          <select class="form-control selectpicker" data-live-search="true" id="section" name="section">
              <option value="{{course.section}}">{{course.section}}</option>
          </select>
          {# --Schedule Block-- #}
          <h5>Schedule Block</h5>
          <select class="form-control" name="schedule">
            <option value="">---</option>
            {% for schedule in schedules %}
              <option value="{{schedule.sid}}" 
                {% if course.schedule.order == schedule.order %} 
                  selected 
                {% endif %}
              >
                {{schedule.letter}}: {% for day in schedule.days %} {{day.day}} 
                  {% endfor %} {{schedule.startTime.strftime('%I:%M%p')}}-{{schedule.endTime.strftime('%I:%M%p')}}
              </option>
            {% endfor %}
          </select>
          {# --Term-- #}
          <h5>Term</h5>
          <select class="form-control" name="term">
            {% for term in terms %}
              <option value="{{term.termCode}}" 
                {% if currentTerm == term.termCode %} 
                  selected 
                {% endif %}
              >
                {{term.name}}
              </option>
            {% endfor %}
          </select>
          {# --Capacity-- #}
          <h5>Capacity</h5>
          <input type="number" name ="capacity" class="form-control" min="1" value ="{{course.capacity}}" />
          {# --Cross Listed-- #}
          <h5>Cross Listed</h5>
          <div class="radio">
            <label>
              <input type="radio" name="crossListed" id="exampleRadios1" value=1 required
                {% if course.crossListed == 1 %}
                  checked="checked"
                {% endif %}
              >
                Yes
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="crossListed" id="exampleRadios1" value=0 required
                {% if course.crossListed == 0 %}
                  checked="checked"
                {% endif %}
              >
                No
            </label>
          </div>
          {# --Notes-- #}
          <h5>Notes</h5>
          <textarea class="form-control" name="notes">{% if course.notes is not none %}{{ course.notes }}{% endif %}</textarea>
          {# --Instructors-- #}
          <h5>Edit Instructor</h5>
            {% include "snips/selectUser.html" %}
          <br>
        </div>
        <div class="modal-footer">
          {# DIFFERENT URL'S DEPENDING ON THE PAGE #}
          {% if page == "courses" %}
            <a type="button" class="btn btn-primary btn-sm" href="/courses/{{currentTerm}}/{{course.prefix.prefix}}">Close</a>
          {% else %}
            <a type="button" class="btn btn-primary btn-sm" href="/courseManagement/{{page}}/{{currentTerm}}">Close</a>
          {% endif %}            
          <input  class="btn btn-success btn-sm pull-right" value = "Save" type ="submit" />
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}
{% block belowContainer %}
<script type="text/javascript">
  var cid = {{course.cId}};
  var title =  "{{course.prefix.prefix}} {{course.bannerRef.number}} {{course.section}}";

</script>

{% endblock %}
