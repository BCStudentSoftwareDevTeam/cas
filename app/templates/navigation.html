<!--Stop the navbar from collapsing. Needed to not get strange behavior from the sidebar-->
<!--<link rel="stylesheet" href="/static/css/navbar.css" type="text/css" />-->
<!--This is the navigation bar that is found at the top of the page-->
<link rel="stylesheet" href="/static/css/navbar.css" type="text/css" />
<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
  
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">CAS</a>
  </div>
  
  <ul class="nav navbar-nav"> 
    {% for menuItem in cfg['mainMenu'] %}
      <li 
        {% if currentPage == menuItem['title'] %}
          class="active"
        {% endif %}
      >
        <a href="{{menuItem['link']}}">{{menuItem['title']}}</a>
      </li>
    {% endfor %}
  </ul>
  
  <ul class="nav navbar-nav navbar-top-links navbar-right">
    {% if isAdmin %}
      <li class=" nav dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" > Administration <span class="caret"></span></a>
        <ul class="dropdown-menu"  id ="sort">
          {% for menuItem in cfg['adminMenu'] %}
            <li
              {% for pageName in menuItem['page'] %}
                {% if currentPage == pageName %}
                  class = "active"
                {% endif %}
              {% endfor %}
            >
              <a href="{{menuItem['link']}}">{{menuItem['title']}}</a>
            </li>
          {% endfor %}  
        </ul>
      </li>
    {%endif%}
  </ul>
      
  {% if isBuildingManager or isAdmin %}
    <ul class="nav navbar-nav navbar-top-links navbar-right">
      <li class=" nav dropdown">
        <a href="/buildingManagement" role="button" aria-haspopup="true" aria-expanded="false" > Building Management </a>
      </li>
    </ul>
  {% endif %}    
            
  <!-- /.navbar-top-links -->
  <link rel="stylesheet" href="/static/css/sidebar.css" type="text/css" />
  {% set sidebarlink = 'snips/sidebars/'+currentPage+'Sidebar.html' %}
  <div id="sidebarEnclosure">
    {% include sidebarlink %}
  </div>
  <script type="text/javascript" src="/static/js/local/sidebar.js"></script>
  <!-- /.navbar-static-side -->
</nav>

<script>
//sorts drop down elements after page loads
$("#sort").html(
    $("#sort").children ("li").sort(function (a, b) {
        return $(a).text().toUpperCase().localeCompare(
            $(b).text().toUpperCase());
    }) 
); 
</script>